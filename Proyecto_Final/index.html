<!DOCTYPE html> 
<html class="no-js" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Weather Widget App</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/custom.css">
    <link rel="stylesheet" href="css/fontello.css">
    <link rel="stylesheet" href="css/animation.css">
    <!--[if IE 7]><link rel="stylesheet" href="css/fontello-ie7.css"><![endif]-->

</head>

<body>


    <div ng-app="weatherApp">

        <div ng-controller="AdvSearch">        
           <select ng-options="province as province.name for province in provinces" ng-change="listOfCities(Provinces.woeid)" ng-model="Provinces">
           </select>
           <select ng-options="city as city.name for city in cities" ng-model="Cities">
           </select>

           <button ng-mouseover="count = count + 1" ng-init="count=0" name="add-widget-btn-adv" ng-click="addWidget(Cities.woeid)">Add weather widget from dropdown {{count}}</button>

        </div> 




        <div id="adder" ng-controller="MainCtrl">
            
    		<input list="cityList" ng-model="SelectedCity" ng-change="updateQuery(SelectedCity)" placeholder="Seach for City in Argentina"/>
    		<datalist id="cityList">
    			<option value="{{ city_query.name  + ', '  + city_query.admin1.content }}">
    		</datalist>


            <button name="add-widget-btn" ng-click="addWidget(SelectedCity)">Add weather widget</button>
       


        </div>


 


        <div ng-controller="WidgetsList">

            <div ng-mouseover="showCloseButton($index)" id="cage{{$index}}" class="maincage commonwidth themecolor" ng-repeat="widget in widgets track by $index" >
                <div class="bgimagecage commonwidth">
                    <div class="locationselect">
                        <div class="cityname">{{ widget.location.city + ', ' + widget.location.country}}    <i id="delete{{$index}}" ng-click="deleteWidget($index)" class="icon-cancel hidden-delete"></i></div>
                    </div>

                    <span class="tempvalue"><i class="{{codeToIcon(widget.item.condition.code)}} centericon k-widget"></i></span>
                    <span class="date">{{widget.lastBuildDate}}</span>

                    <div class="todayweather">
                        <div class="todayweatherinner">
                    		<span class="todayweathertxtfirst">&nbsp{{widget.item.condition.text}}<b> | </b>{{widget.item.condition.temp + 'º C'}}<b> |</b>
                           </span>

                    		<span class="todayweathertxtsecond">Humidity : {{widget.atmosphere.humidity}}%<br>Wind: {{widget.wind.speed + " " + widget.units.speed + ' ' + widget.wind.direction + 'º' }} <br> Pressure: {{widget.atmosphere.pressure + ' ' + widget.units.pressure}}</span>

                        </div>
                	</div>
                    
                    <div class="dayscell themecolor">
                        <div class="dayscellinner">
                            <div class="daycol">
                                {{ widget.item.forecast[0].day }}<br />
                                <span class="smalldate">{{ widget.item.forecast[0].date }}</span><br />
                                <i class="{{codeToIcon(widget.item.forecast[0].code)}} weekdayweathericon"></i><br />
                                <i class="icon-up-open"></i>{{widget.item.forecast[0].high}}º<br />
                                <i class="icon-down-open"></i>{{widget.item.forecast[0].low}}º<br />
                                {{widget.item.forecast[0].text}}
                            </div>
                            <div class="daycol">
                                {{ widget.item.forecast[1].day }}<br />
                                <span class="smalldate">{{ widget.item.forecast[1].date }}</span><br />
                                <i class="{{codeToIcon(widget.item.forecast[1].code)}} weekdayweathericon"></i><br />
                                <i class="icon-up-open"></i>{{widget.item.forecast[1].high}}º<br />
                                <i class="icon-down-open"></i>{{widget.item.forecast[1].low}}º<br />
                                {{widget.item.forecast[1].text}}
                            </div>
                            <div class="daycol">
                                {{ widget.item.forecast[2].day }}<br />
                                <span class="smalldate">{{ widget.item.forecast[2].date }}</span><br />
                                <i class="{{codeToIcon(widget.item.forecast[2].code)}} weekdayweathericon"></i><br />
                                <i class="icon-up-open"></i>{{widget.item.forecast[2].high}}º<br />
                                <i class="icon-down-open"></i>{{widget.item.forecast[2].low}}º<br />
                                {{widget.item.forecast[2].text}}
                            </div>
                            <div class="daycol">
                                {{ widget.item.forecast[3].day }}<br />
                                <span class="smalldate">{{ widget.item.forecast[3].date }}</span><br />
                                <i class="{{codeToIcon(widget.item.forecast[3].code)}} weekdayweatheh.query.results.placeericon"></i><br />
                                <i class="icon-up-open"></i>{{widget.item.forecast[3].high}}º<br />
                                <i class="icon-down-open"></i>{{widget.item.forecast[3].low}}º<br />
                                {{widget.item.forecast[3].text}}
                            </div>
                            <div class="daycol">
                                {{ widget.item.forecast[4].day }}<br />
                                <span class="smalldate">{{ widget.item.forecast[4].date }}</span><br />
                                <i class="{{codeToIcon(widget.item.forecast[4].code)}} weekdayweathericon"></i><br />
                                <i class="icon-up-open"></i>{{widget.item.forecast[4].high}}º<br />
                                <i class="icon-down-open"></i>{{widget.item.forecast[4].low}}º<br />
                                {{widget.item.forecast[4].text}}
                            </div>
         
                        </div>
                    </div>
                </div>

           
            <!--Because of the ::after selector, in order to set the right background image and make it look right inside
                of the widget, the style element had with all the properties for .maincage had to be defined here. Simply
                plugging in the "style="" attribute with the correct background:url results in the image not correctly
                rendered behind the shading
            -->
            <style>
              #cage{{$index}}::after {
                content: "";
                background:url("{{codeToImage(widget.item.condition.code)}}");
                background-size:cover;
                opacity: 1;
                top: 0;
                left: 0;
                bottom: 0;
                right: 0;
                position: absolute;
                z-index: -1;
                opacity: 0.54;
                background-size: 133%;
                background-position-x: -87px;*/  
            }

            </style>
           <!-- End of style tag-->





            </div>

        </div>


    </div>

        
        <!--<script type="text/javascript" src="js/jquery-2.1.4.js"></script>-->
        <script type="text/javascript" src="js/angular.js"></script>
        <script type="text/javascript" src="js/angular-animate.js"></script>
        <script type="text/javascript" src="js/custom.js"></script>









</body>
</html>
